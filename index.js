import a from"express";import e from"body-parser";import r from"axios";let app=a(),port=3e3,lang=[],lang2=[],config={headers:{"x-rapidapi-key":"86bd06d194msh1c357ba1925fabep1b4b14jsnb057546bef01","x-rapidapi-host":"rapid-translate-multi-traduction.p.rapidapi.com","Content-Type":"application/json"}};app.use(a.static("public")),app.use(e.urlencoded({extended:!0})),app.get("/",(a,e)=>{e.render("index.ejs")}),app.post("/lang",(a,e)=>{lang=a.body.lang,e.render("index.ejs",e.locals={lang:lang[1],lang2:lang2[1]}),console.log("from->"+lang)}),app.post("/lang2",(a,e)=>{lang2=a.body.convert,e.render("index.ejs",e.locals={lang:lang[1],lang2:lang2[1]}),console.log("to->"+lang2)}),app.post("/translate",async(a,e)=>{try{let t=a.body.from,n=await r.post("https://rapid-translate-multi-traduction.p.rapidapi.com/t",{from:lang[0],to:lang2[0],q:t},config),o=n.data;e.render("index.ejs",e.locals={translatedText:o[0],text:t,lang:lang[1],lang2:lang2[1]}),lang=[],lang2=[]}catch(l){console.error(`Error: ${l}`),e.render("index.ejs",e.locals={text:"Some Error Occured!\uD83D\uDE2D",translatedText:"Some Error Occured!\uD83D\uDE2D"})}}),app.post("/copy-text",(a,e)=>{try{e.render("index.ejs",e.locals={translatedText:"You text is copied to clipboard\uD83D\uDCCB",text:"You text is copied to clipboard\uD83D\uDCCB",lang:lang[1],lang2:lang2[1]})}catch(r){console.error(`Error: ${r}`),e.render("index.ejs",e.locals={text:"Some Error Occured!\uD83D\uDE2D",translatedText:"Some Error Occured!\uD83D\uDE2D"})}}),app.listen(3e3,()=>console.log("Server is running on port 3000"));